<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Elasticsearchï¼ˆäºŒï¼‰é…ç½® - Hexoqzf</title><meta description="java,æŠ€æœ¯åˆ†äº«,åç«¯å¼€å‘,æ”¯ä»˜æ¡†æ¶,æ•°æ®æ¥å£,ç®—æ³•,leetcode"><meta property="og:type" content="blog"><meta property="og:title" content="è¾£æ¤’ã®é…±"><meta property="og:url" content="https://removeif.github.io/"><meta property="og:site_name" content="è¾£æ¤’ã®é…±"><meta property="og:description" content="java,æŠ€æœ¯åˆ†äº«,åç«¯å¼€å‘,æ”¯ä»˜æ¡†æ¶,æ•°æ®æ¥å£,ç®—æ³•,leetcode"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/removeif/removeif.github.io@latest/img/avatar.jpg"><meta property="article:published_time" content="2018-06-05T16:00:00.000Z"><meta property="article:modified_time" content="2018-06-09T08:35:14.000Z"><meta property="article:author" content="removeif"><meta property="article:tag" content="Elasticsearch"><meta property="article:tag" content="æœç´¢å¼•æ“"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/removeif/removeif.github.io@latest/img/avatar.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://removeif.github.io/"},"headline":"è¾£æ¤’ã®é…±","image":["https://cdn.jsdelivr.net/gh/removeif/removeif.github.io@latest/img/avatar.jpg"],"datePublished":"2018-06-05T16:00:00.000Z","dateModified":"2018-06-09T08:35:14.000Z","author":{"@type":"Person","name":"removeif"},"description":"java,æŠ€æœ¯åˆ†äº«,åç«¯å¼€å‘,æ”¯ä»˜æ¡†æ¶,æ•°æ®æ¥å£,ç®—æ³•,leetcode"}</script><link rel="alternative" href="/atom.xml" title="Hexoqzf" type="application/atom+xml"><link rel="icon" href="https://cdn.jsdelivr.net/gh/removeif/removeif.github.io@latest/img/wico.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191121122803.png" alt="Hexoqzf" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/archives">å½’æ¡£</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/tags/%E6%B3%95%E5%BE%8B/">å¾‹æ³•</a><a class="navbar-item" href="/media">å½±éŸ³</a><a class="navbar-item" href="/album">ç›¸å†Œ</a><a class="navbar-item" href="/friend">å‹é“¾</a><a class="navbar-item" href="/self-talking">ç¢ç¢å¿µ</a><a class="navbar-item" href="/message">ç•™è¨€</a><a class="navbar-item" href="/about">å…³äº</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2018-06-05T16:00:00.000Z">2018-06-06</time><a class="commentCountImg" href="/2018/06/06/elasticsearch/elasticsearch(%E4%BA%8C)%E9%85%8D%E7%BD%AE/#comment-container"><span class="display-none-class">366f644a99926f2f04a240cbd7cb7b42</span><img class="not-gallery-item" src="/img/chat.svg">Â <span class="commentCount" id="366f644a99926f2f04a240cbd7cb7b42">Â 99+</span>Â Â Â Â </a><span class="level-item"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/Elasticsearch/">Elasticsearch</a></span><span class="level-item">18 minutes read (About 2690 words)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span> visits</span></div></div><h1 class="title is-3 is-size-4-mobile">Elasticsearchï¼ˆäºŒï¼‰é…ç½®</h1><div class="content"><h2 id="Elasticsearchè®¾ç½®"><a href="#Elasticsearchè®¾ç½®" class="headerlink" title="Elasticsearchè®¾ç½®"></a>Elasticsearchè®¾ç½®</h2><p>Elasticsearchæä¾›äº†å¾ˆå¥½çš„é»˜è®¤è®¾ç½®ï¼Œå¹¶ä¸”åªéœ€è¦å¾ˆå°‘çš„é…ç½®ã€‚ </p>
<p>è™½ç„¶Elasticsearchåªéœ€è¦å¾ˆå°‘çš„é…ç½®ï¼Œä½†åœ¨æŠ•å…¥ç”Ÿäº§ä¹‹å‰éœ€è¦è€ƒè™‘ä»¥ä¸‹è®¾ç½®ã€‚</p>
<a id="more"></a>

<h3 id="elasticsearch-yml-é…ç½®"><a href="#elasticsearch-yml-é…ç½®" class="headerlink" title="elasticsearch.yml  é…ç½®"></a>elasticsearch.yml  é…ç½®</h3><p>1ã€path.data and path.logs</p>
<p>å¦‚æœæ­£åœ¨ä½¿ç”¨<code>.zip</code>æˆ–<code>.tar.gz</code>å­˜æ¡£ï¼Œåˆ™<code>data</code>å’Œ<code>logs</code> ç›®å½•åœ¨<code>$ES_HOMEä¸‹</code>ã€‚å¦‚æœè¿™äº›é‡è¦æ–‡ä»¶å¤¹ä¿ç•™åœ¨é»˜è®¤ä½ç½®ï¼Œé‚£ä¹ˆåœ¨å°†Elasticsearchå‡çº§åˆ°æ–°ç‰ˆæœ¬æ—¶ï¼Œè¿™äº›æ–‡ä»¶å¤¹æœ‰å¯èƒ½ä¼šè¢«åˆ é™¤ã€‚ </p>
<p>åœ¨ç”Ÿäº§ä½¿ç”¨ä¸­ï¼Œå¦‚æœæƒ³è¦æ›´æ”¹æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶å¤¹çš„ä½ç½®ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.data: &#x2F;var&#x2F;data&#x2F;elasticsearch</span><br><span class="line">path.logs: &#x2F;var&#x2F;log&#x2F;elasticsearch</span><br></pre></td></tr></table></figure>



<p>2ã€ cluster.name</p>
<p> æŸä¸ªèŠ‚ç‚¹åªæœ‰å’Œé›†ç¾¤ä¸‹çš„å…¶ä»–èŠ‚ç‚¹å…±äº«å®ƒçš„ cluster.name  æ‰èƒ½åŠ å…¥ä¸€ä¸ªé›†ç¾¤ã€‚é»˜è®¤æ˜¯elasticsearch ï¼Œåº”å°†å…¶æ›´æ”¹ä¸ºæè¿°é›†ç¾¤ç”¨é€”çš„é€‚å½“åç§°ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cluster.name: logging-prod</span><br></pre></td></tr></table></figure>

<p>3ã€ node.name</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchå°†ä½¿ç”¨éšæœºç”Ÿæˆçš„UUIDçš„å‰ä¸ƒä¸ªå­—ç¬¦ä½œä¸ºèŠ‚ç‚¹IDã€‚è¯·æ³¨æ„ï¼ŒèŠ‚ç‚¹IDæ˜¯æŒä¹…çš„ï¼Œå¹¶ä¸”åœ¨èŠ‚ç‚¹é‡æ–°å¯åŠ¨æ—¶ä¸ä¼šæ›´æ”¹ï¼Œå› æ­¤é»˜è®¤èŠ‚ç‚¹åç§°ä¹Ÿä¸ä¼šæ›´æ”¹ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node.nameï¼šprod-data-2</span><br></pre></td></tr></table></figure>

<p>4ã€network.host </p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchä»…ç»‘å®šåˆ°å›ç¯åœ°å€ - ä¾‹å¦‚<code>127.0.0.1</code> å’Œ<code>[::1]</code>ã€‚è¿™è¶³ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œå•ä¸ªå¼€å‘èŠ‚ç‚¹ã€‚ </p>
<p>å®é™…ä¸Šï¼Œå¯ä»¥ä»<code>$ES_HOME</code> å•ä¸ªèŠ‚ç‚¹ä¸Šçš„ç›¸åŒä½ç½®å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ã€‚è¿™å¯ä»¥ç”¨äºæµ‹è¯•Elasticsearchå½¢æˆç¾¤é›†çš„èƒ½åŠ›ï¼Œä½†å®ƒä¸æ˜¯æ¨èç”¨äºç”Ÿäº§çš„é…ç½®ã€‚ </p>
<p>ä¸ºäº†ä¸å…¶ä»–æœåŠ¡å™¨ä¸Šçš„èŠ‚ç‚¹è¿›è¡Œé€šä¿¡å¹¶å½¢æˆç¾¤é›†ï¼Œæ‚¨çš„èŠ‚ç‚¹å°†éœ€è¦ç»‘å®šåˆ°éå›é€åœ°å€ã€‚è™½ç„¶<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html">ç½‘ç»œè®¾ç½®</a>å¾ˆå¤šï¼Œä½†é€šå¸¸æ‚¨éœ€è¦é…ç½®çš„æ˜¯ <code>network.host</code>ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">network.hostï¼š192.168.1.10</span><br></pre></td></tr></table></figure>

<p>åªè¦å¯¹<code>network.host</code>æä¾›è‡ªå®šä¹‰è®¾ç½®ï¼ŒElasticsearchå°±ä¼šå‡å®šæ‚¨æ­£åœ¨ä»å¼€å‘æ¨¡å¼è½¬ç§»åˆ°ç”Ÿäº§æ¨¡å¼ï¼Œå¹¶å°†å¤šä¸ªç³»ç»Ÿå¯åŠ¨æ£€æŸ¥ä»è­¦å‘Šå‡çº§åˆ°å¼‚å¸¸ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html#dev-vs-prod">å¼€å‘æ¨¡å¼ä¸ç”Ÿäº§æ¨¡å¼</a><a href="https://github.com/elastic/elasticsearch/edit/6.2/docs/reference/setup/sysconfig.asciidoc">ç¼–è¾‘</a>ã€‚ </p>
<p>5ã€Discovery settings</p>
<p>Elasticsearchä½¿ç”¨åä¸ºâ€œ<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-zen.html">Zen Discovery</a>â€çš„è‡ªå®šä¹‰å‘ç°å®ç°è¿›è¡ŒèŠ‚ç‚¹åˆ°èŠ‚ç‚¹çš„ç¾¤é›†å’Œä¸»é€‰ä¸¾ã€‚åœ¨æŠ•å…¥ç”Ÿäº§ä¹‹å‰ï¼Œåº”è¯¥é…ç½®ä¸¤ä¸ªé‡è¦çš„å‘ç°è®¾ç½®ã€‚ </p>
<ul>
<li><p>discovery.zen.ping.unicast.hosts</p>
<p>å¼€ç®±å³ç”¨ï¼Œæ²¡æœ‰ä»»ä½•ç½‘ç»œé…ç½®ï¼ŒElasticsearchå°†ç»‘å®šåˆ°å¯ç”¨çš„ç¯å›åœ°å€ï¼Œå¹¶å°†æ‰«æç«¯å£9300åˆ°9305ä»¥å°è¯•è¿æ¥åˆ°è¿è¡Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„å…¶ä»–èŠ‚ç‚¹ã€‚è¿™æä¾›äº†è‡ªåŠ¨é›†ç¾¤ä½“éªŒï¼Œè€Œæ— éœ€è¿›è¡Œä»»ä½•é…ç½®ã€‚ </p>
<p>å½“éœ€è¦ä¸å…¶ä»–æœåŠ¡å™¨ä¸Šçš„èŠ‚ç‚¹ç»„æˆç¾¤é›†æ—¶ï¼Œæ‚¨å¿…é¡»æä¾›ç¾¤é›†ä¸­å…¶ä»–èŠ‚ç‚¹çš„ç§å­åˆ—è¡¨ï¼Œè¿™äº›èŠ‚ç‚¹å¯èƒ½æ˜¯æ´»çš„å¹¶ä¸”å¯è”ç³»çš„ã€‚è¿™å¯ä»¥æŒ‡å®šå¦‚ä¸‹ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">discovery.zen.ping.unicast.hostsï¼š</span><br><span class="line">   -  192.168.1.10:9300</span><br><span class="line">   -  192.168.1.11 </span><br><span class="line">   -  seeds.mydomain.com</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœªæŒ‡å®šç«¯å£ï¼Œå°†é»˜è®¤ä¸º<code>transport.profiles.default.port</code>å¹¶å›é€€åˆ° <code>transport.tcp.port</code>ã€‚ </p>
<p>å¦‚æœè¾“å…¥çš„æ˜¯ä¸»æœºåï¼Œè¢«è§£ææˆå¤šä¸ªåœ°å€ï¼Œå°†ä¼šå°è¯•è¿æ¥æ‰€æœ‰åœ°å€ã€‚</p>
</li>
</ul>
<ul>
<li><p>discovery.zen.ping.unicast.hosts</p>
<p>ä¸ºé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œé…ç½®è¯¥<code>discovery.zen.minimum_master_nodes</code>è®¾ç½®è‡³å…³é‡è¦ï¼Œ ä»¥ä¾¿æ¯ä¸ªç¬¦åˆä¸»èŠ‚ç‚¹çš„èŠ‚ç‚¹éƒ½çŸ¥é“ä¸ºäº†å½¢æˆç¾¤é›†è€Œå¿…é¡»å¯è§<em>çš„ä¸»</em>èŠ‚ç‚¹çš„<em>æœ€å°æ•°é‡</em>ã€‚ </p>
<p>å¦‚æœæ²¡æœ‰è¿™ç§è®¾ç½®ï¼Œé­å—ç½‘ç»œæ•…éšœçš„é›†ç¾¤å°±æœ‰å¯èƒ½å°†é›†ç¾¤åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„é›†ç¾¤ - è„‘è£‚ - è¿™å°†å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚åœ¨ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#split-brain">Avoiding split brain with <code>minimum_master_nodes</code></a><a href="https://github.com/elastic/elasticsearch/edit/6.2/docs/reference/modules/node.asciidoc">edit</a>  æä¾›äº†æ›´è¯¦ç»†çš„è§£é‡Š ã€‚ </p>
<p>ä¸ºé¿å…åˆ†è£‚å¤§è„‘ï¼Œåº”å°†å€™é€‰èŠ‚ç‚¹çš„æ•°é‡è®¾ç½®ä¸ºï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆmaster_eligible_nodes &#x2F; 2ï¼‰+ 1</span><br></pre></td></tr></table></figure>

<p>å‡å¦‚æœ‰3ä¸ªèŠ‚ç‚¹ï¼Œæœ€å°å€™é€‰ä¸»èŠ‚ç‚¹æ•°åº”è¯¥æ˜¯<code>ï¼ˆ3/2)+1=2</code>: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">discovery.zen.minimum_master_nodesï¼š2</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="jvm-options"><a href="#jvm-options" class="headerlink" title="jvm.options"></a>jvm.options</h3><p>1ã€Heap size</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchè®¾ç½®JVMä½¿ç”¨çš„æœ€å°å’Œæœ€å¤§å †å†…å­˜ä¸º1 GBã€‚åœ¨è½¬ç§»åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œé…ç½®å †å¤§å°ä»¥ç¡®ä¿Elasticsearchæœ‰è¶³å¤Ÿçš„å¯ç”¨å †æ˜¯éå¸¸é‡è¦çš„ã€‚ </p>
<p>Elasticsearchå°†é€šè¿‡ï¼ˆæœ€å°å †å¤§å°ï¼‰å’Œï¼ˆæœ€å¤§å †å¤§å°ï¼‰è®¾ç½®æ¥åˆ†é…<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/jvm-options.html">jvm.optionsä¸­</a>æŒ‡å®šçš„æ•´ä¸ªå † ã€‚<code>Xms</code>  <code>Xmx</code></p>
<p>è¿™äº›è®¾ç½®çš„å€¼å–å†³äºæœåŠ¡å™¨ä¸Šå¯ç”¨çš„RAMæ•°é‡ã€‚å¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼š</p>
<ul>
<li><p>å°†æœ€å°å †å¤§å°ï¼ˆ<code>Xms</code>ï¼‰å’Œæœ€å¤§å †å¤§å°ï¼ˆ<code>Xmx</code>ï¼‰è®¾ç½®ä¸ºç›¸ç­‰ .</p>
</li>
<li><p>è®¾ç½®<code>Xmx</code>ä¸ºä¸è¶…è¿‡ç‰©ç†RAMçš„50ï¼…ï¼Œä»¥ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç‰©ç†å†…å­˜ç•™ç»™å†…æ ¸æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ã€‚</p>
</li>
<li><p>Elasticsearchå¯ç”¨çš„å †è¶Šå¤šï¼Œå¯ç”¨äºç¼“å­˜çš„å†…å­˜å°±è¶Šå¤šã€‚ä½†è¯·æ³¨æ„ï¼Œå¤ªå¤šçš„å †å¯èƒ½ä¼šä½¿æ‚¨é•¿æ—¶é—´åƒåœ¾æ”¶é›†æš‚åœã€‚</p>
</li>
<li><p>ä¸è¦è®¾ç½®<code>Xmx</code>ä¸ºJVMç”¨äºå‹ç¼©å¯¹è±¡æŒ‡é’ˆï¼ˆå‹ç¼©oopsï¼‰çš„ä¸´ç•Œå€¼ä»¥ä¸Š; ç¡®åˆ‡çš„ä¸´ç•Œå€¼æœ‰æ‰€ä¸åŒï¼Œä½†æ¥è¿‘32 GBã€‚å¯ä»¥é€šè¿‡åœ¨æ—¥å¿—ä¸­æŸ¥æ‰¾ä¸€è¡Œæ¥éªŒè¯æ‚¨æ˜¯å¦å¤„äºé™åˆ¶ä¹‹ä¸‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heap size [1.9gb], compressed ordinary object pointers [true]</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°½é‡ä¿æŒä½äºåŸºäºé›¶çš„å‹ç¼©oopsçš„é˜ˆå€¼; å‡†ç¡®çš„æˆªæ­¢å€¼ä¼šæœ‰æ‰€ä¸åŒï¼Œä½†å¤§å¤šæ•°ç³»ç»Ÿä¸Šçš„26 GBæ˜¯å®‰å…¨çš„ï¼Œä½†åœ¨æŸäº›ç³»ç»Ÿä¸Šå¯èƒ½é«˜è¾¾30 GBã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨JVMé€‰é¡¹å¯åŠ¨Elasticsearch <code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode</code>å¹¶æŸ¥æ‰¾ä»¥ä¸‹è¡Œæ¥éªŒè¯æ‚¨æ˜¯å¦å¤„äºé™åˆ¶ä¹‹ä¸‹ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops</span><br></pre></td></tr></table></figure>

<p>è€Œä¸æ˜¯ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>ç¤ºä¾‹ï¼šé€šè¿‡jvm.optionsæ–‡ä»¶è®¾ç½®å †å¤§å° </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Xms2g </span><br><span class="line">-Xmx2g</span><br></pre></td></tr></table></figure>

<p>å°†æœ€å°å †å¤§å°è®¾ç½®ä¸º2gã€‚ </p>
<p>å°†æœ€å¤§å †å¤§å°è®¾ç½®ä¸º2g ã€‚</p>
<p>2ã€Heap dump path</p>
<p>å½’æ¡£tarè§£å‹åŒ…é»˜è®¤æƒ…å†µä¸‹ä¸é…ç½®å †è½¬å‚¨è·¯å¾„ã€‚ JVMå°†é»˜è®¤è½¬å‚¨åˆ°Elasticsearchè¿›ç¨‹çš„å·¥ä½œç›®å½•ã€‚ å¦‚æœæƒ³é…ç½®ä¸€ä¸ªå †è½¬å‚¨è·¯å¾„ï¼Œåº”è¯¥ä¿®æ”¹ jvm.optionsä¸­æ¡ç›®<code>#-XX:HeapDumpPath=/heap/dump/path</code> åˆ é™¤æ³¨é‡Šæ ‡è®°<code>#</code>ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªå®é™…çš„è·¯å¾„ã€‚ </p>
<p>3ã€GC logging</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchå¯ç”¨GCæ—¥å¿—ã€‚<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/jvm-options.html"><code>jvm.options</code></a>åœ¨Elasticsearchæ—¥å¿—ä¸­é»˜è®¤é…ç½® ä¸ºé»˜è®¤ä½ç½®ã€‚é»˜è®¤é…ç½®æ¯64 MBè½®æ¢ä¸€æ¬¡æ—¥å¿—ï¼Œæœ€å¤šå¯æ¶ˆè€—2 GBç£ç›˜ç©ºé—´ã€‚ </p>
<h2 id="ç³»ç»Ÿè®¾ç½®"><a href="#ç³»ç»Ÿè®¾ç½®" class="headerlink" title="ç³»ç»Ÿè®¾ç½®"></a>ç³»ç»Ÿè®¾ç½®</h2><p>ç†æƒ³æƒ…å†µä¸‹ï¼ŒElasticsearchåº”è¯¥åœ¨æœåŠ¡å™¨ä¸Šç‹¬ç«‹è¿è¡Œå¹¶ä½¿ç”¨å¯ç”¨çš„æ‰€æœ‰èµ„æºã€‚ä¸ºæ­¤ï¼Œéœ€è¦é…ç½®æ“ä½œç³»ç»Ÿä»¥å…è®¸è¿è¡ŒElasticsearchçš„ç”¨æˆ·è®¿é—®æ¯”é»˜è®¤å…è®¸çš„èµ„æºæ›´å¤šçš„èµ„æºã€‚ </p>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticsearchå‡å®šæ‚¨æ­£åœ¨å¼€å‘æ¨¡å¼ä¸‹å·¥ä½œã€‚å¦‚æœä»¥ä¸‹ä»»ä½•è®¾ç½®é…ç½®ä¸æ­£ç¡®ï¼Œä»å¯ä»¥å¯åŠ¨å¹¶è¿è¡ŒElasticsearchèŠ‚ç‚¹ã€‚ ä½†ä¼šå‘æ—¥å¿—æ–‡ä»¶å†™å…¥è­¦å‘Šã€‚</p>
<p>ä½†æ˜¯åªè¦é…ç½®å¥½ç½‘ç»œè®¾ç½®<code>network.host</code>ï¼ŒElasticsearchå°±ä¼šå‡å®šæ‚¨æ­£åœ¨è½¬å‘ç”Ÿäº§å¹¶å°†ä¸Šè¿°è­¦å‘Šå‡çº§ä¸ºå¼‚å¸¸ã€‚è¿™äº›å¼‚å¸¸å°†é˜»æ­¢ElasticsearchèŠ‚ç‚¹å¯åŠ¨ã€‚å¯ç¡®ä¿æ‚¨ä¸ä¼šç”±äºé…ç½®é”™è¯¯çš„æœåŠ¡å™¨è€Œä¸¢å¤±æ•°æ®ã€‚ </p>
<p>1ã€ç¦ç”¨äº¤æ¢åˆ†åŒº</p>
<p>æœ‰ä¸‰ç§æ–¹æ³•ç¦ç”¨äº¤æ¢ã€‚é¦–é€‰é€‰é¡¹æ˜¯å®Œå…¨ç¦ç”¨äº¤æ¢ã€‚ å…¶å®ƒå¦‚æœ€å°åŒ–swappinessä¸å†…å­˜é”å®š ã€‚ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration-memory.html">å…·ä½“å‚è€ƒ</a></p>
<ul>
<li>ç¦ç”¨æ‰€æœ‰äº¤æ¢æ–‡ä»¶</li>
</ul>
<p>åœ¨Linuxç³»ç»Ÿä¸Šï¼Œä¸´æ—¶ç¦ç”¨äº¤æ¢ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo swapoff -a</span><br></pre></td></tr></table></figure>

<p>è¦æ°¸ä¹…ç¦ç”¨å®ƒï¼Œéœ€è¦ç¼–è¾‘è¯¥<code>/etc/fstab</code>æ–‡ä»¶å¹¶æ³¨é‡Šæ‰åŒ…å«<code>swap</code>çš„æ‰€æœ‰è¡Œã€‚ </p>
<ul>
<li><p>é…ç½®swappiness </p>
<p>Linuxç³»ç»Ÿä¸Šå¯ç”¨çš„å¦ä¸€ä¸ªé€‰é¡¹æ˜¯ç¡®ä¿sysctlå€¼ <code>vm.swappiness</code>è®¾ç½®ä¸º<code>1</code>ã€‚è¿™å‡å°‘äº†å†…æ ¸çš„äº¤æ¢è¶‹åŠ¿ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸åº”è¯¥å¯¼è‡´äº¤æ¢ï¼ŒåŒæ—¶ä»ç„¶å…è®¸æ•´ä¸ªç³»ç»Ÿåœ¨ç´§æ€¥æƒ…å†µä¸‹è¿›è¡Œäº¤æ¢ã€‚ </p>
</li>
<li><p>å¯ç”¨bootstrap.memory_lock</p>
<p>å¦ä¸€ç§é€‰æ‹©æ˜¯åœ¨Linux / Unixç³»ç»Ÿä¸Šä½¿ç”¨<a href="http://opengroup.org/onlinepubs/007908799/xsh/mlockall.html">mlockall</a>æˆ– åœ¨Windows ä¸Š ä½¿ç”¨ <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx">VirtualLock</a>ï¼Œä»¥å°è¯•å°†è¿›ç¨‹åœ°å€ç©ºé—´é”å®šåˆ°RAMä¸­ï¼Œé˜²æ­¢ä»»ä½•Elasticsearchå†…å­˜è¢«æ¢å‡ºã€‚åœ¨<code>config/elasticsearch.yml</code>æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bootstrap.memory_lockï¼štrue</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p>2ã€å¢åŠ æ–‡ä»¶æè¿°ç¬¦</p>
<p>Elasticsearchä½¿ç”¨äº†å¤§é‡çš„æ–‡ä»¶æè¿°ç¬¦æˆ–æ–‡ä»¶å¥æŸ„ã€‚å¦‚æœç”¨å®Œæ–‡ä»¶æè¿°ç¬¦å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ç¡®ä¿å°†è¿è¡ŒElasticsearchçš„ç”¨æˆ·çš„æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦æ•°é™åˆ¶å¢åŠ åˆ°65,536æˆ–æ›´é«˜ã€‚ </p>
<p>åœ¨Linuxç³»ç»Ÿä¸Šï¼Œå¯ä»¥é€šè¿‡ç¼–è¾‘ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html#limits.conf"><code>/etc/security/limits.conf</code></a> æ–‡ä»¶ä¸ºç‰¹å®šç”¨æˆ·è®¾ç½®æ°¸ä¹…é™åˆ¶ã€‚è¦å°†elasticsearchç”¨æˆ·çš„æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°è®¾ç½®ä¸º65,536ï¼Œåœ¨<code>limits.conf</code>æ–‡ä»¶ä¸­æ·»åŠ ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elasticsearch  -  nofile 65536</span><br></pre></td></tr></table></figure>

<p>æ­¤æ›´æ”¹ä»…åœ¨<code>elasticsearch</code>ç”¨æˆ·ä¸‹æ¬¡æ‰“å¼€æ–°ä¼šè¯æ—¶ç”Ÿæ•ˆã€‚ </p>
<p>è¯´æ˜ï¼šåœ¨Ubuntuä¸­å¯åŠ¨è¿›ç¨‹çš„æ–‡ä»¶<code>init.d</code> å¯èƒ½ä¼šå¿½ç•¥limits.conf ï¼Œè¦å¯ç”¨è¯¥<code>limits.conf</code>æ–‡ä»¶ï¼Œå–æ¶ˆ<code>/etc/pam.d/su</code>ä»¥ä¸‹æ³¨é‡Šè¡Œï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># session    required   pam_limits.so</span><br></pre></td></tr></table></figure>

<p>3ã€å¢åŠ è™šæ‹Ÿå†…å­˜</p>
<p>Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules-store.html#default_fs"><code>mmapfs</code></a>é»˜è®¤ä½¿ç”¨ä¸€ä¸ªç›®å½•æ¥å­˜å‚¨å®ƒçš„ç´¢å¼•ã€‚mmapè®¡æ•°çš„é»˜è®¤æ“ä½œç³»ç»Ÿé™åˆ¶å¯èƒ½å¤ªä½ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜ä¸è¶³å¼‚å¸¸ã€‚ </p>
<p>åœ¨Linuxä¸Šï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ä¸´æ—¶å¢åŠ é™åˆ¶  ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w vm.max_map_count &#x3D; 262144</span><br></pre></td></tr></table></figure>

<p>è¦æ°¸ä¹…è®¾ç½®ï¼Œç¼–è¾‘ /etc/sysctl.conf æ–‡ä»¶ã€‚æ·»åŠ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.max_map_count&#x3D;262144</span><br></pre></td></tr></table></figure>

<p>å¹¶æ‰§è¡Œå‘½ä»¤ï¼š sysctl -p</p>
<p>4ã€å¢åŠ å¯åˆ›å»ºçº¿ç¨‹æ•°é‡</p>
<p>Elasticsearché’ˆå¯¹ä¸åŒç±»å‹çš„æ“ä½œä½¿ç”¨å¤šä¸ªçº¿ç¨‹æ± ã€‚èƒ½å¤Ÿåœ¨éœ€è¦æ—¶åˆ›å»ºæ–°çº¿ç¨‹å¾ˆé‡è¦ã€‚ç¡®ä¿Elasticsearchç”¨æˆ·å¯ä»¥åˆ›å»ºçš„çº¿ç¨‹æ•°è‡³å°‘ä¸º4096ã€‚ </p>
<p>å¯ä»¥é€šè¿‡ç¼–è¾‘ <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html#limits.conf"><code>/etc/security/limits.conf</code></a> æ–‡ä»¶ä¸ºç‰¹å®šç”¨æˆ·è®¾ç½®æ°¸ä¹…é™åˆ¶ã€‚è¦å°†elasticsearchç”¨æˆ·çš„æœ€å¤§åˆ›å»ºçº¿ç¨‹æ•°é‡è®¾ç½®ä¸º4096ï¼Œåœ¨<code>limits.conf</code>æ–‡ä»¶ä¸­æ·»åŠ ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elastic - nproc 4096</span><br></pre></td></tr></table></figure>

<p>5ã€JVM DNSç¼“å­˜è®¾ç½®</p>
<p>  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/networkaddress-cache-ttl.html">DNS cache settings</a></p>
<p>å‚è€ƒï¼š<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html</a></p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html</a></p>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html</a></p>
</div><div class="article-tags size-small is-uppercase mb-4"><i class="fas fa-tags has-text-grey"></i>Â <a class="link-muted mr-2" rel="tag" href="/tags/Elasticsearch/">Elasticsearch</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/">æœç´¢å¼•æ“</a></div><ul class="post-copyright"><li><strong>æœ¬æ–‡æ ‡é¢˜ï¼š</strong><a href="http://yoursite.com/2018/06/06/elasticsearch/elasticsearch(%E4%BA%8C)%E9%85%8D%E7%BD%AE/">Elasticsearchï¼ˆäºŒï¼‰é…ç½®</a></li><li><strong>æœ¬æ–‡ä½œè€…ï¼š</strong><a href="http://yoursite.com">qzf</a></li><li><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://yoursite.com/2018/06/06/elasticsearch/elasticsearch(%E4%BA%8C)%E9%85%8D%E7%BD%AE/">http://yoursite.com/2018/06/06/elasticsearch/elasticsearch(äºŒ)é…ç½®/</a></li><li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7">#Â æ¨èæ–‡ç« </span><br></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135456.png" alt="Alipay"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="https://raw.githubusercontent.com/removeif/blog_image/master/img/2019/20190802135550.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/06/07/elasticsearch/kibana%E7%9A%84%E5%AE%89%E8%A3%85/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Kibanaå®‰è£…</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/06/06/elasticsearch/elasticsearch(%E5%9B%9B)%E6%8F%92%E4%BB%B6/"><span class="level-item">Elasticsearchï¼ˆå››ï¼‰æ’ä»¶</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.css"><script src="/js/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '366f644a99926f2f04a240cbd7cb7b42',
            repo: 'blog_comment',
            owner: 'removeif',
            clientID: '46a9f3481b46ea0129d8',
            clientSecret: '79c7c9cb847e141757d7864453bcbf89f0655b24',
            admin: ["removeif"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="https://cdn.jsdelivr.net/gh/removeif/removeif.github.io@latest/img/avatar.jpg" alt="è¾£æ¤’ã®é…±"></figure><p class="title is-size-4 is-block line-height-inherit">è¾£æ¤’ã®é…±</p><p class="is-size-6 is-block">å°šæœªæ‰§ä½©å‰‘ï¼Œè½¬çœ¼å³æ±Ÿæ¹–</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>é˜¿å°”åŠåˆ©äºš</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">276</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">43</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">93</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://weibo.com/u/3050419984" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/removeif"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/u/3050419984"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:removeif@163.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Next" href="https://removeif.github.io/remove.io"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><hr><p id="hitokoto">:D ä¸€è¨€å¥å­è·å–ä¸­...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"æ¥æºã€Š"+data.from+"ã€‹</p><p>æä¾›è€…-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°è¯„è®º</h3><span class="body_hot_comment">åŠ è½½ä¸­ï¼Œæœ€æ–°è¯„è®ºæœ‰1åˆ†é’Ÿå»¶è¿Ÿ...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-22T16:00:00.000Z">2020-05-23</time></p><p class="title is-6"><a class="link-muted" href="/2020/05/23/Jenkins/%E5%89%8D%E7%AB%AF%E6%96%87%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%96%B9%E6%A1%88/">å‰ç«¯æ–‡ä»¶æ›´æ–°æ–¹æ¡ˆ</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/Jenkins/">Jenkins</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-28T16:00:00.000Z">2020-04-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/29/nginx/echo-nginx-module%E6%A8%A1%E5%9D%97/">echo-nginx-moduleæ¨¡å—</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/nginx/">nginx</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-27T16:00:00.000Z">2020-04-28</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/28/nginx/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/nginx%E5%9C%A8%E8%AF%B7%E6%B1%82%E8%B7%AF%E5%BE%84%E4%B8%AD%E4%BF%AE%E6%94%B9%E5%AD%97%E7%AC%A6%E4%B8%B2/">nginxåœ¨è¯·æ±‚è·¯å¾„ä¸­ä¿®æ”¹å­—ç¬¦ä¸²</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/nginx/">nginx</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-19T16:00:00.000Z">2020-04-20</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/20/%E5%B7%A5%E4%BD%9C/java%E6%9C%8D%E5%8A%A1CPU%E5%8D%A0%E7%94%A8%E9%AB%98/">javaæœåŠ¡CPUå ç”¨é«˜</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%B7%A5%E4%BD%9C/">å·¥ä½œ</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-18T16:00:00.000Z">2020-04-19</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/19/%E5%B7%A5%E4%BD%9C/java%E6%9C%8D%E5%8A%A1%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8%E5%AE%9A%E4%BD%8D/">javaæœåŠ¡å†…å­˜å ç”¨å®šä½</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%B7%A5%E4%BD%9C/">å·¥ä½œ</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Elasticsearch/"><span class="level-start"><span class="level-item">Elasticsearch</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/HTTPS/"><span class="level-start"><span class="level-item">HTTPS</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">JavaåŸºç¡€</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Jenkins/"><span class="level-start"><span class="level-item">Jenkins</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/MongoDB/"><span class="level-start"><span class="level-item">MongoDB</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/OCR/"><span class="level-start"><span class="level-item">OCR</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/RabbitMq/"><span class="level-start"><span class="level-item">RabbitMq</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring-boot/"><span class="level-start"><span class="level-item">Spring-boot</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">æŸ¥çœ‹å…¨éƒ¨&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">æŸ¥çœ‹å…¨éƒ¨&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Elasticsearch/"><span class="tag">Elasticsearch</span><span class="tag is-grey-lightest">21</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"><span class="tag">æœç´¢å¼•æ“</span><span class="tag is-grey-lightest">18</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IO%E6%B5%81/"><span class="tag">IOæµ</span><span class="tag is-grey-lightest">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E4%BD%9C/"><span class="tag">å·¥ä½œ</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag is-grey-lightest">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/20%E5%A4%A9/"><span class="tag">20å¤©</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9B%86%E5%90%88/"><span class="tag">é›†åˆ</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongodb/"><span class="tag">mongodb</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/21%E5%A4%A9/"><span class="tag">21å¤©</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring-boot/"><span class="tag">Spring-boot</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jenkins/"><span class="tag">Jenkins</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rsync/"><span class="tag">rsync</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4/"><span class="tag">å‘½ä»¤</span><span class="tag is-grey-lightest">5</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">æŸ¥çœ‹å…¨éƒ¨&gt;&gt;</span></a></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=removeifFeedsId&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="removeifFeedsId" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div><p class="help">è¾“å…¥é‚®ç®±å¼€å§‹è®¢é˜…ï¼Œæ›´åšåé‚®ä»¶é€šçŸ¥ï¼</p></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191121122803.png" alt="Hexoqzf" height="28"></a><p class="size-small"><span>&copy; 2020 qzf</span>Â Â Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/removeif" target="_blank">removeif</a>Â <br>Â© ç‰ˆæƒè¯´æ˜ï¼š[æœ¬ç½‘ç«™æ‰€æœ‰å†…å®¹å‡æ”¶é›†äºäº’è”ç½‘æˆ–è‡ªå·±åˆ›ä½œ,<br>Â Â Â Â æ–¹ä¾¿äºç½‘å‹ä¸è‡ªå·±å­¦ä¹ äº¤æµï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·<a href="/message" target="_blank">ç•™è¨€</a>ï¼Œç«‹å³å¤„ç†]<br><script type="text/javascript" src="/js/statistics.js"></script><span id="statistic-times"></span><br><div class="size-small"><span id="busuanzi_container_site_uv">â¤ï¸æ„Ÿè°¢<strong>Â <span id="busuanzi_value_site_uv">99+</span>Â </strong></span>å°ä¼™ä¼´çš„<strong>Â <span id="busuanzi_value_site_pv">99+</span>Â </strong>æ¬¡å…‰ä¸´ï¼ŒæŸ¥çœ‹ğŸ’<a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">ä¸»é¢˜æºç </a>ï¼â¤ï¸</div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="/js/gallery.js" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/comment-issue-data.js" defer></script><link rel="stylesheet" href="/css/insight.css"><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="Type something..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>(function (window) {
            var INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: 'Posts',
                    PAGES: 'Pages',
                    CATEGORIES: 'Categories',
                    TAGS: 'Tags',
                    UNTITLED: '(Untitled)',
                },
                CONTENT_URL: '/content.json',
            };
            window.INSIGHT_CONFIG = INSIGHT_CONFIG;
        })(window);</script><script src="/js/insight.js" defer></script></body></html>